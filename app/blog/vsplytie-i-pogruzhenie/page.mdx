import MdxLayout from "@/components/mdx-layout";

export const metadata = {
    title: 'Всплытие и погружение | Blog',
    description: 'Всплытие и погружение',
};

<MdxLayout>
    # Всплытие и погружение

    Всплытие (bubbling) и погружение (capturing) — это два механизма обработки событий в JavaScript, которые определяют
    порядок распространения события в дереве DOM-элементов. Оба этих механизма играют важную роль в управлении событиями
    в веб-приложениях.

    ## Всплытие (Bubbling)

    Всплытие — это механизм, при котором событие распространяется вверх по дереву DOM от целевого элемента к его
    родителям. Например, если у вас есть кнопка внутри контейнера, и вы кликаете на кнопку, сначала сработает обработчик
    события на самой кнопке, затем на контейнере, потом на родителе контейнера и так далее, пока событие не достигнет
    корня дерева (обычно это document или window).

    ```javascript
    document.getElementById('btn').addEventListener('click', function(event) {
        console.log('Button clicked!');
    });

    document.getElementById('container').addEventListener('click', function(event) {
        console.log('Container clicked!');
    });

    // Если вы кликнете на кнопку, консоль выведет следующее:
    Button clicked! // Сначала срабатывает обработчик на кнопке
    Container clicked! // Потом срабатывает обработчик на контейнере
    ```

    ## Погружение (Capturing)

    Погружение — это противоположный механизм, при котором событие сначала распространяется сверху вниз по дереву DOM,
    начиная с корневого элемента и заканчивая целевым элементом. Это полезно, если вам нужно перехватить событие до
    того, как оно дойдет до целевого элемента.

    Чтобы включить режим погружения, нужно указать третий параметр true при добавлении слушателя событий методом
    addEventListener:

    ```javascript
    document.getElementById('container').addEventListener('click', function(event) {
        console.log('Container clicked during capturing phase!');
    }, true); // Третий параметр true включает фазу погружения

    Container clicked during capturing phase! // Сначала срабатывает обработчик на контейнере
    Button clicked! // Потом срабатывает обработчик на кнопке
    ```

    ## Порядок обработки событий

    Полный жизненный цикл события состоит из трех фаз:

    1. Фаза погружения (Capturing Phase): Событие движется от корня дерева DOM к целевому элементу.
    2. Целевой элемент (Target Phase): Событие достигает целевого элемента.
    3. Фаза всплытия (Bubbling Phase): Событие возвращается обратно к корню дерева DOM.

    ## Отмена всплытия

    Иногда бывает необходимо предотвратить всплытие события дальше по дереву DOM. Для этого можно использовать метод
    event.stopPropagation():

    ```javascript
    document.getElementById('btn').addEventListener('click', function(event) {
        event.stopPropagation(); // Останавливаем всплытие
        console.log('Button clicked!');
    });

    document.getElementById('container').addEventListener('click', function(event) {
        console.log('Container clicked!');
    });

    // Теперь, если вы кликните на кнопку, консоль выведет только:
    Button clicked!
    ```

    ## Практическое применение

    Механизмы всплытия и погружения широко применяются в веб-разработке. Например, всплытие часто используют для
    делегирования событий. Если у вас есть список элементов, и вы хотите обрабатывать события на каждом из них, вместо
    добавления обработчика к каждому элементу, можно добавить один обработчик на родительский элемент и использовать
    всплытие для перехвата событий:

    ```javascript
    document.getElementById('list').addEventListener('click', function(event) {
        if (event.target.tagName === 'LI') {
            console.log('Clicked on:', event.target.textContent);
        }
    });

    // Теперь, когда вы кликаете на любой пункт списка, консоль выводит:
    Clicked on: Item 1
    ```

    ## Заключение

    Понимание механизмов всплытия и погружения в JavaScript крайне важно для правильного управления событиями в
    веб-приложениях. Эти механизмы позволяют контролировать поток событий и обеспечивают гибкость в обработке
    пользовательского взаимодействия.
</MdxLayout>